
<script>
    function NotifikasiSukses(title, text) {
        //swal({
        //    title: title,
        //    text: text,
        //    icon: 'success',
        //    timer: 2000,
        //    buttons: false
        //});
        toastr.success(text)
    }
    function NotifikasiInfo(text) {
        //swal({
        //    title: title,
        //    text: text,
        //    icon: 'success',
        //    timer: 2000,
        //    buttons: false
        //});
        toastr.info(text)
    }
    function RandomString(length) {
        let result = '';
        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        const charactersLength = characters.length;
        let counter = 0;
        while (counter < length) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
            counter += 1;
        }
        return result;
    }
    function NotifikasiError(title, text) {
        swal({
            title: title,
            text: text,
            icon: 'error',
            showCloseButton: true
            //buttons: false
        });
    }
    function NotifikasiAlert(title, text) {
        swal({
            title: title,
            text: text,
            icon: 'warning',
            showCloseButton: true
            //buttons: false
        });
    }

    function RandomString(length) {
        let result = '';
        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        const charactersLength = characters.length;
        let counter = 0;
        while (counter < length) {
            result += characters.charAt(Math.floor(Math.random() * charactersLength));
            counter += 1;
        }
        return result;
    }

    function FilterRegex(element) {
        var regexPattern = /[<>\\/'";]/g;
        var value = $("#" + element).val();
        var final = value.replace(regexPattern, '');
        $("#" + element).val(final);
    }

    function InputOnlyNumber(elementId) {
        $("#" + elementId).keypress(validateNumber);
    }
    function validateNumber(event) {
        var key = window.event ? event.keyCode : event.which;
        if (event.keyCode === 8 || event.keyCode === 46 || event.keyCode === 188) {
            return true;
        } else if (key < 48 || key > 57) {
            return false;
        } else {
            return true;
        }
    };
    function validateNumber(event) {
        var key = window.event ? event.keyCode : event.which;
        if (event.keyCode === 8 || event.keyCode === 46 || event.keyCode === 188) {
            return true;
        } else if (key < 48 || key > 57) {
            return false;
        } else {
            return true;
        }
    };
    function FormatCurrency(ctrl) {
        //Check if arrow keys are pressed - we want to allow navigation around textbox using arrow keys
        if (event.keyCode == 37 || event.keyCode == 38 || event.keyCode == 39 || event.keyCode == 40) {
            return;
        }

        var val = ctrl.value;

        val = val.replace(/[,.]/g, "")

        ctrl.value = "";
        val += '';
        x = val.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? '.' + x[1] : '';

        var rgx = /(\d+)(\d{3})/;

        while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + '.' + '$2');
        }

        ctrl.value = x1 + x2;
    }
    function FormatCurrency2(ctrl) {
        // Mendapatkan nilai input
        var val = ctrl.value;

        // Menghapus karakter selain angka
        val = val.replace(/\D/g, "");

        // Mengosongkan nilai kontrol
        ctrl.value = "";

        // Menambahkan kembali angka yang sudah diformat
        val += '';
        var x = val.split('.');
        var x1 = x[0];
        var x2 = x.length > 1 ? '.' + x[1] : '';

        var rgx = /(\d+)(\d{3})/;

        while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + '.' + '$2');
        }

        // Memasukkan nilai yang telah diformat ke dalam kontrol
        ctrl.value = x1 + x2;
    }

    function FormatCurrency3(ctrl) {
        // Check if arrow keys are pressed - we want to allow navigation around textbox using arrow keys
        if (event.keyCode == 37 || event.keyCode == 38 || event.keyCode == 39 || event.keyCode == 40) {
            return;
        }

        var val = ctrl.value;

        // Remove only dots, keep commas
        val = val.replace(/\./g, "");

        // Split the value on the comma to handle decimal points correctly
        var parts = val.split(',');
        var integerPart = parts[0];
        var decimalPart = parts.length > 1 ? ',' + parts[1] : '';

        // Regular expression for adding thousands separators
        var rgx = /(\d+)(\d{3})/;

        while (rgx.test(integerPart)) {
            integerPart = integerPart.replace(rgx, '$1' + '.' + '$2');
        }

        // Reassemble the value with the decimal part
        ctrl.value = integerPart + decimalPart;
    }
    
    function currencyFormat(money) {
     var formattedMoney = money.toLocaleString('id-ID');

     // Check if the formatted string ends with ".00" and remove it
     if (formattedMoney.endsWith('.00')) {
         formattedMoney = formattedMoney.slice(0, -3);
     }

     return formattedMoney;
    }

    function formatMoneyNoDecimal(amount, decimalCount = 0, decimal = ",", thousands = ".") {
        try {
            decimalCount = Math.abs(decimalCount);
            decimalCount = isNaN(decimalCount) ? 2 : decimalCount;

            const negativeSign = amount < 0 ? "-" : "";

            let i = parseInt(amount = Math.abs(Number(amount) || 0).toFixed(decimalCount)).toString();
            let j = (i.length > 3) ? i.length % 3 : 0;

            return negativeSign + (j ? i.substr(0, j) + thousands : '') + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thousands) + (decimalCount ? decimal + Math.abs(amount - i).toFixed(decimalCount).slice(2) : "");
        } catch (e) {
        }
    };
    function formatMoney(amount, decimalCount = 2, decimal = ",", thousands = ".") {
        try {
            decimalCount = Math.abs(decimalCount);
            decimalCount = isNaN(decimalCount) ? 2 : decimalCount;

            const negativeSign = amount < 0 ? "-" : "";

            let i = parseInt(amount = Math.abs(Number(amount) || 0).toFixed(decimalCount)).toString();
            let j = (i.length > 3) ? i.length % 3 : 0;

            return negativeSign + (j ? i.substr(0, j) + thousands : '') + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thousands) + (decimalCount ? decimal + Math.abs(amount - i).toFixed(decimalCount).slice(2) : "");
        } catch (e) {
        }
    };
    function formatDate(date) {
        var d = new Date(date),
            month = '' + (d.getMonth() + 1),
            day = '' + d.getDate(),
            year = d.getFullYear();

        if (month.length < 2)
            month = '0' + month;
        if (day.length < 2)
            day = '0' + day;

        return [day, month, year].join('/');
    }

    function formatDateTime(date, locale) {
        var options = {
            year: 'numeric',
            month: 'short',
            day: '2-digit',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: false
        };

        var formattedDateTime = new Intl.DateTimeFormat(locale, options).format(new Date(date));
        formattedDateTime = formattedDateTime.replace(/\./g, ':');
        var parts = formattedDateTime.split(',');
        var formattedDate = parts[0].replace(/ /g, '-'); // Keep hyphens in the date part
        var formattedTime = parts[1].replace(/\./g, ':'); // Remove hyphens from the time part

        return formattedDate + ' ' + formattedTime;

    }


     function expiredDate(date) {
        var d = new Date(date),
            month = '' + (d.getMonth() + 1),
            day = '' + d.getDate(),
            year = d.getFullYear();

        if (month.length < 2)
            month = '0' + month;
        if (day.length < 2)
            day = '0' + day;

        return [year, month, day].join('-');
    }

    function formatDateToIndonesian(date) {
        
        const monthNames = [
        "Jan", "Feb", "Mar", "Apr",
        "Mei", "Jun", "Jul", "Agus",
        "Sep", "Okt", "Nov", "Des"
        ];

        const parts = date.split("-");
        const year = parseInt(parts[0], 10);
        const month = parseInt(parts[1], 10) - 1;
        const day = parseInt(parts[2], 10);

        const dateObject = new Date(year, month, day);

        const formattedDate = `${day}-${monthNames[month]}-${year}`;

        return formattedDate;
    }

    function getFormData($form) {
        var unindexed_array = $form.serializeArray();
        var indexed_array = {};

        $.map(unindexed_array, function (n, i) {
            indexed_array[n['name']] = n['value'];
        });

        return indexed_array;
    }
    //DROP DOWN
    function DropdownStatusNasabahServerSide(elementId, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetStatusNasabahLookup", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: true,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownStatusRekeningServerSide(elementId, jumlahRowPerPage, isMultiple, provinceKode) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetStatusRekeningLookup", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        provinceKode : provinceKode,
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: true,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownUnitServerSide(elementId, jumlahRowPerPage, isMultiple, districtKode) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetAllDataUnit", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        districtKode: districtKode,
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: true,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownEntitasServerSide(elementId, jumlahRowPerPage, isMultiple, subDistrictKode) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetAllDataEntitas", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        subDistrictKode: subDistrictKode,
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: true,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownAnomaliVAServerSide(elementId, jumlahRowPerPage, isMultiple, RekeningGiro) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetDropdownVaAnomali", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        rekeningGiro: RekeningGiro,
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: true,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownRoleServerSide(elementId, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetAllDataRole", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;
                    console.log("data", data);
                    return {
                        results: data,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.length
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: true,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownCabangPendanaanServerSide(elementId, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetAllDataRegional", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: true,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownRegionalServerSide(elementId, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetAllDataCabangPendanaan", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: true,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownLookupServerSide(elementId, type, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetAllLookup", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        type: type,
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: false,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownParentMenuServerSide(elementId, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetAllDataParentMenu", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: true,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownServerSide(elementId, funcName, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '../Utility/'+funcName,
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: false,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }
    function DropdownSubServerSide(elementId, funcName, parentId, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '../Utility/' + funcName,
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    if (parentId == 0) {
                        return {
                            q: params.term, // search term
                            page: params.page || 1,
                            rowPerPage: jumlahRowPerPage,
                        };
                    }
                    else {
                        return {
                            q: params.term, // search term
                            page: params.page || 1,
                            rowPerPage: jumlahRowPerPage,
                            parentId: parentId
                        };
                    }

                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: false,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownSubPuskesmasServerSide(elementId, funcName, parentId, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '../Utility/' + funcName,
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                        return {
                            q: params.term, // search term
                            page: params.page || 1,
                            rowPerPage: jumlahRowPerPage,
                            provinceCode: parentId.ProvinceCode,
                            districtCode: parentId.DistrictCode,
                            tahun: parentId.Tahun
                        };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: false,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }
    function DropdownRekeningVAServerSide(elementId, jumlahRowPerPage, isMultiple, PuskesmasKode, DistrictKode, ProvinsiKode, Tahun) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '@Url.Action("GetRekeningVACascade", "Utility")',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        PuskesmasKode: PuskesmasKode,
                        DistrictKode: DistrictKode,
                        ProvinsiKode: ProvinsiKode,
                        Tahun: Tahun,
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: true,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownServerSidePuskesmas(elementId, funcName, jumlahRowPerPage, isMultiple, Tahun) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '../Utility/' + funcName,
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        tahun: Tahun,
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    //debugger
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: false,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function DropdownCreditorRefServerSide(elementId, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '../Utility/GetAllDataDropdownCreditorRef',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: false,
            theme: 'bootstrap4',
            dropdownParent: $('#modal-lg')
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }
    function GetMonthName(){
        // Mapping array for month names
        let monthNames = [
          "Januari", "Februari", "Maret", "April", "Mei", "Juni",
          "Juli", "Agustus", "September", "Oktober", "November", "Desember"
        ];

        return monthNames;
    }

    function DropdownRekIdServerSide(elementId, jumlahRowPerPage, isMultiple) {
        var dropdown = $("#" + elementId).select2({
            ajax: {
                url: '../Utility/GetAllDataDropdownRekId',
                dataType: 'json',
                delay: 250,
                multiple: isMultiple,
                allowClear: true,
                data: function (params) {
                    return {
                        q: params.term, // search term
                        page: params.page || 1,
                        rowPerPage: jumlahRowPerPage
                    };
                },
                processResults: function (data, params) {
                    params.page = params.page || 1;

                    return {
                        results: data.items,
                        pagination: {
                            more: (params.page * jumlahRowPerPage) < data.total_count
                        }
                    };
                },
                cache: true
            },
            placeholder: '-Silahkan pilih-',
            escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
            minimumInputLength: 0,
            tags: false,
            theme: 'bootstrap4'
        });
        var select2Instance = $('#' + elementId).data('select2');
        select2Instance.on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    }

    function addNullValues(arr) {
        var leng = differenceInMonths(arr[0].label);
        for (let i = 0; i < leng; i++) {
            arr.unshift({y:null}); // Menambahkan nilai null pada awal array
        }

        function differenceInMonths(endMonth) {
            const months = [
                "January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"
            ];

            const startIndex = 0;
            const endIndex = months.indexOf(endMonth);

            if (startIndex === -1 || endIndex === -1) {
                // Salah satu atau kedua nama bulan tidak valid
                return null;
            }

            return Math.abs(endIndex - startIndex);
        }



        function formatMiliar(){
            var ticksStyle = {
            fontColor: '#495057',
            fontStyle: 'bold'
        }
        var mode = 'index'
        var intersect = true
        var $salesChart = $('#sales-chart')
        // eslint-disable-next-line no-unused-vars
        var salesChart = new Chart($salesChart, {
            type: 'bar',
            data: {
                labels: ['VA1', 'VA2', 'VA3', 'VA4', 'VA5'],
                datasets: [
                    {
                        backgroundColor: '#007bff',
                        borderColor: '#007bff',
                        data: [25000000, 30000000, 60000000, 15000000, 10000000]
                    },
                    {
                        backgroundColor: '#ced4da',
                        borderColor: '#ced4da',
                        data: [5000000, 15000000, 45000000, 10000000, 5000000]
                    }
                ]
            },
            options: {
                maintainAspectRatio: false,
                tooltips: {
                    mode: mode,
                    intersect: intersect
                },
                hover: {
                    mode: mode,
                    intersect: intersect
                },
                legend: {
                    display: false
                },
                scales: {
                    yAxes: [{
                        // display: false,
                        gridLines: {
                            display: true,
                            lineWidth: '4px',
                            color: 'rgba(0, 0, 0, .2)',
                            zeroLineColor: 'transparent'
                        },
                        ticks: $.extend({
                            beginAtZero: true,

                            // Include a dollar sign in the ticks
                            callback: function (value) {
                                if (value >= 1000000000000){
                                    value /= 1000000000000
                                    value += 'Triliun'
                                }
                                else if (value >= 1000000000) {
                                    value /= 1000000000
                                    value += 'Miliar'
                                }
                                else if (value >= 1000000) {
                                    value /= 1000000
                                    value += 'Juta'
                                }
                                else if (value >= 1000) {
                                    value /= 1000
                                    value += 'Ribu'
                                }

                                return 'Rp.' + value
                            }
                        }, ticksStyle)
                    }],
                    xAxes: [{
                        display: true,
                        gridLines: {
                            display: false
                        },
                        ticks: ticksStyle
                    }]
                }
            }
        })
        }
    }

</script>